(function(n){var t={};n.trafficCop=function(r,u){var e=r,f;if(arguments.length===2&&(e=n.extend(!0,u,{url:r})),f=JSON.stringify(e),f in t)for(i in{success:1,error:1,complete:1})t[f][i](e[i]);else t[f]=n.ajax(e).always(function(){delete t[f]});return t[f]}})(jQuery),function(n,t,i){var o={templates:{},storeTemplate:function(n,t){this.templates[n]=t},getTemplate:function(n){return this.templates[n]},purge:function(){this.templates={}}},s={templateIds:[],storeTemplate:function(n,t){var i=document.getElementById(n);i===null&&(this.templateIds.push(n),i=document.createElement("script"),i.type="text/html",i.id=n,document.body.appendChild(i)),i.text=t},getTemplate:function(n){return document.getElementById(n)},purge:function(){for(var n=0;n<this.templateIds.length;n++)document.body.removeChild(document.getElementById(this.templateIds[n]));this.templateIds=[]}},h="<div class='infuser-error'>The template <a href='{TEMPLATEURL}'>{TEMPLATEID}<\/a> could not be loaded. {STATUS}<\/div>",e=function(n,t,i){return h.replace("{STATUS}",n).replace("{TEMPLATEID}",t).replace("{TEMPLATEURL}",i)},u=[],f={getTemplatePath:function(n){var t=n.templatePrefix+n.templateId+n.templateSuffix;return n.templateUrl===i||n.templateUrl===""?t:n.templateUrl+"/"+t},templateGetSuccess:function(n,t){return function(i){r.store.storeTemplate(n,i),t(r.store.getTemplate(n))}},templateGetError:function(t,i,f){return function(o){n.inArray(t,u)===-1&&u.push(t);var s=e("HTTP Status code: "+o.status,t,i);r.store.storeTemplate(t,s),f(r.store.getTemplate(t))}},getAjaxOptions:function(){}},r={storageOptions:{hash:o,script:s},store:o,defaults:{templateUrl:"/templates",templateSuffix:".tmpl.html",templatePrefix:"",ajax:{async:!0,dataType:"html",type:"GET"},target:function(n){return"#"+n},loadingTemplate:{content:'<div class="infuser-loading">Loading...<\/div>',transitionIn:function(t,i){var r=n(t);r.hide(),r.html(i),r.fadeIn()},transitionOut:function(t){n(t).html("")}},postRender:function(){},preRender:function(){},render:function(t,i){var r=n(t);r.children().length===0?r.append(n(i)):r.children().replaceWith(n(i))},bindingInstruction:function(n){return n},useLoadingTemplate:!0},get:function(t,i){var e=n.extend({},r.defaults,typeof t=="object"?t:{templateId:t}),o;e.ajax.url=f.getTemplatePath(e),o=r.store.getTemplate(e.ajax.url),o&&n.inArray(e.ajax.url,u)===-1?i(o):(e.ajax.success=f.templateGetSuccess(e.ajax.url,i),e.ajax.error=f.templateGetError(e.templateId,e.ajax.url,i),n.trafficCop(e.ajax))},getSync:function(t){var i=n.extend({},r.defaults,typeof t=="object"?t:{templateId:t},{ajax:{async:!1}}),s,o;return i.ajax.url=f.getTemplatePath(i),(s=r.store.getTemplate(i.ajax.url))&&n.inArray(i.ajax.url,u)===-1||(o=null,i.ajax.success=function(n){o=n},i.ajax.error=function(){n.inArray(i.ajax.url)===-1&&u.push(i.ajax.url),o=e("HTTP Status code: exception.status",i.templateId,i.ajax.url)},n.ajax(i.ajax),o===null?o=e("An unknown error occurred.",i.templateId,i.ajax.url):(r.store.storeTemplate(i.ajax.url,o),s=r.store.getTemplate(i.ajax.url))),s},infuse:function(t,u){var f=n.extend({},r.defaults,typeof t=="object"?t:u,typeof t=="string"?{templateId:t}:i),e=typeof f.target=="function"?f.target(t):f.target;f.useLoadingTemplate&&f.loadingTemplate.transitionIn(e,f.loadingTemplate.content),r.get(f,function(n){var t=n;f.preRender(e,t),t=f.bindingInstruction(t,f.model),f.useLoadingTemplate&&f.loadingTemplate.transitionOut(e),f.render(e,t),f.postRender(e)})}};t.infuser=r}(jQuery,window),function(n,t,i,r,u){var e=function(n,i){var f=this,e;f.templateId=n,f.loaded=!1,f.template=t.observable(r.defaults.useLoadingTemplate?r.defaults.loadingTemplate.content:u),f.template.data={},f.options=t.utils.extend({},i),f.options.templateId=n,f.options&&f.options.afterRender&&(e=f.options.afterRender,f.options.afterRender=function(){f.loaded&&e.apply(f.options,arguments)})},f;t.utils.extend(e.prototype,{data:function(n,t){if(arguments.length===1)return n==="precompiled"&&this.template(),this.template.data[n];this.template.data[n]=t},text:function(){if(this.loaded||this.getTemplate(),arguments.length===0)return this.template();this.template(arguments[0])},getTemplate:function(){var n=this;r.get(n.options,function(t){n.data("precompiled",null),n.template(t),n.loaded=!0})}}),f=function(n){var i=n?new n:new t.nativeTemplateEngine;return i.templates={},i.makeTemplateSource=function(n,r,u){if(typeof n=="string"){var f=document.getElementById(n);return f?new t.templateSources.domElement(f):(i.templates[n]||(i.templates[n]=new e(n,u)),i.templates[n])}if(n.nodeType==1||n.nodeType==8)return new t.templateSources.anonymousTemplate(n)},i.renderTemplate=function(n,t,r){var u=i.makeTemplateSource(n,t,r);return i.renderTemplateSource(u,t,r)},i},t.KoExternalTemplateEngine=f,i.tmpl&&i.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?t.setTemplateEngine(new f(t.jqueryTmplTemplateEngine)):t.setTemplateEngine(new f)}(window,ko,jQuery,infuser);
//@ sourceMappingURL=koExternalTemplateEngine_all.min.js.map